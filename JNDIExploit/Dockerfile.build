FROM maven:3.8.4-openjdk-8-slim as builder

WORKDIR /src
COPY pom.xml .
COPY lib lib
RUN mvn clean
COPY src src
COPY *.iml .
RUN mvn package

CMD tail -f /dev/null

FROM openjdk:8u181-jdk-alpine

WORKDIR /app/
COPY --from=builder /src/target/JNDIExploit-1.2-SNAPSHOT.jar /app/
ENTRYPOINT [ "java", "-jar", "./JNDIExploit-1.2-SNAPSHOT.jar" ]
